{"version":3,"sources":["../../../../assets/scripts/assets/scripts/dataCenter.js"],"names":["dataCenter","playerData","currentDollor","currentAreaLevel","currentEquips","gotEquips","setUpPlayerDataFromServer","localPlayerData","JSON","parse","cc","sys","localStorage","getItem","changePlayerData","key","value","storePlayerData","setItem","stringify","getRefreshRuleFromServerByAreaLevel","givenLevel","loader","loadRes","err","refreshConfig","log","index","json","areaId","getFishConfigByFishId","givenId","fishConfig","fishModelName","fishDollor","fishId","module","exports"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,aAAa;AACbC,gBAAY;AACRC,uBAAe,CADP;AAERC,0BAAkB,CAFV;AAGRC,uBAAe,EAHP;AAIRC,mBAAU;;AAJF,KADC;;AASbC,6BATa,uCASc;AACvB;AACA,YAAIC,kBAAkBC,KAAKC,KAAL,CAAWC,GAAGC,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,YAA5B,CAAX,CAAtB;AACA,YAAIN,mBAAmB,IAAvB,EAA6B;AACzB,iBAAKN,UAAL,GAAkBM,eAAlB;AACH;AACJ,KAfY;AAiBbO,oBAjBa,4BAiBIC,GAjBJ,EAiBQC,KAjBR,EAiBc;AACvB,aAAKf,UAAL,CAAgBc,GAAhB,GAAsBC,KAAtB;AACH,KAnBY;AAoBbC,mBApBa,6BAoBI;AACb;AACAP,WAAGC,GAAH,CAAOC,YAAP,CAAoBM,OAApB,CAA4B,YAA5B,EAAyCV,KAAKW,SAAL,CAAe,KAAKlB,UAApB,CAAzC;AACH,KAvBY;AAwBbmB,uCAxBa,+CAwBuBC,UAxBvB,EAwBkC;AAC3CX,WAAGY,MAAH,CAAUC,OAAV,CAAkB,mBAAlB,EAAsC,UAASC,GAAT,EAAaC,aAAb,EAA2B;AAC7D,gBAAID,GAAJ,EAAS;AACLd,mBAAGgB,GAAH,CAAOF,GAAP;AACH,aAFD,MAGK;AACD,qBAAK,IAAIG,KAAT,IAAkBF,cAAcG,IAAhC,EAAsC;AAClC,wBAAIH,cAAcG,IAAd,CAAmBD,KAAnB,EAA0BE,MAA1B,IAAoCR,UAAxC,EAAoD;AAChD,+BAAOI,cAAcG,IAAd,CAAmBD,KAAnB,CAAP;AACH;AACJ;AACJ;AACJ,SAXD;AAYH,KArCY;AAsCbG,yBAtCa,iCAsCSC,OAtCT,EAsCkB;AAC3BrB,WAAGY,MAAH,CAAUC,OAAV,CAAkB,YAAlB,EAA+B,UAASC,GAAT,EAAaQ,UAAb,EAAwB;AACnD,gBAAIC,gBAAgB,IAApB;AACA,gBAAIC,aAAa,IAAjB;AACA,iBAAI,IAAIP,KAAR,IAAiBK,WAAWJ,IAA5B,EAAkC;AAC9B,oBAAII,WAAWJ,IAAX,CAAgBD,KAAhB,EAAuBQ,MAAvB,IAAiCJ,OAArC,EAA8C;AAC1CE,oCAAgBD,WAAWJ,IAAX,CAAgBD,KAAhB,EAAuBM,aAAvC;AACAC,iCAAaF,WAAWJ,IAAX,CAAgBD,KAAhB,EAAuBO,UAApC;AACA;AACH;AACJ;AACD,gBAAID,iBAAiB,IAAjB,IAAyBC,cAAc,IAA3C,EAAiD;AAC7C,uBAAO,CAACD,aAAD,EAAgBC,UAAhB,CAAP;AACH,aAFD,MAGK;AACD,uBAAO,IAAP;AACH;AACJ,SAhBD;AAiBH;AAxDY,CAAjB;;AA4DAE,OAAOC,OAAP,GAAiBrC,UAAjB","file":"dataCenter.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\nvar dataCenter = {\n    playerData: {\n        currentDollor: 0,\n        currentAreaLevel: 1,\n        currentEquips: [],\n        gotEquips:[]\n    \n    },\n\n    setUpPlayerDataFromServer(){\n        //it should to get datas from server, now we will just read local data\n        var localPlayerData = JSON.parse(cc.sys.localStorage.getItem(\"playerData\"));\n        if (localPlayerData != null) {\n            this.playerData = localPlayerData;\n        }\n    },\n    \n    changePlayerData(key,value){\n        this.playerData.key = value;\n    },\n    storePlayerData(){\n        //it will not be used when server start to deal with data\n        cc.sys.localStorage.setItem(\"playerData\",JSON.stringify(this.playerData));\n    },\n    getRefreshRuleFromServerByAreaLevel(givenLevel){\n        cc.loader.loadRes(\"refreshRuleConfig\",function(err,refreshConfig){\n            if (err) {\n                cc.log(err);\n            }\n            else {\n                for (var index in refreshConfig.json) {\n                    if (refreshConfig.json[index].areaId == givenLevel) {\n                        return refreshConfig.json[index];\n                    }\n                }\n            }\n        })\n    },\n    getFishConfigByFishId(givenId) {\n        cc.loader.loadRes(\"fishConfig\",function(err,fishConfig){\n            var fishModelName = null\n            var fishDollor = null\n            for(var index in fishConfig.json) {\n                if (fishConfig.json[index].fishId == givenId) {\n                    fishModelName = fishConfig.json[index].fishModelName;\n                    fishDollor = fishConfig.json[index].fishDollor;\n                    break;\n                }\n            }\n            if (fishModelName != null && fishDollor != null) {\n                return [fishModelName, fishDollor];\n            }\n            else {\n                return null\n            }\n        })\n    },\n\n}\n\nmodule.exports = dataCenter;\n"]}